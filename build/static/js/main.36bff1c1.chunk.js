(window["webpackJsonpreact-firebase-blog-starter"]=window["webpackJsonpreact-firebase-blog-starter"]||[]).push([[0],{38:function(e,t,a){e.exports=a(58)},43:function(e,t,a){},56:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(18),c=a.n(l),o=(a(43),a(26)),i=a.n(o),u=a(33),m=a(8),s=a(64),d=a(62),g=a(63),b=a(61),p=a(9),f=a(15),h=a(21);a(45),a(47);var E,v={apiKey:"AIzaSyC_QXxiHay3ceeSceSEbx0gCpAeKBIzgd4",authDomain:"react-firebase-blog-291d4.firebaseapp.com",databaseURL:"https://react-firebase-blog-291d4-default-rtdb.firebaseio.com",projectId:"react-firebase-blog-291d4",storageBucket:"react-firebase-blog-291d4.appspot.com",messagingSenderId:"56496362352",appId:"1:56496362352:web:9b87c50518de62df9975b5"},y=function(){return E||(h.a.initializeApp(v),E=h.a,h.a)},O=(y().auth(),r.a.createContext());function j(e){var t=e.children,a=Object(n.useState)(),l=Object(m.a)(a,2),c=l[0],o=l[1],i=Object(n.useState)(!0),u=Object(m.a)(i,2),s=u[0],d=u[1];Object(n.useEffect)((function(){return y().auth().onAuthStateChanged((function(e){o(e),d(!1)}))}),[]);var g={currentUser:c,login:function(e,t){return y().auth().signInWithEmailAndPassword(e,t)},signup:function(e,t){return y().auth().createUserWithEmailAndPassword(e,t)},logout:function(){return y().auth().signOut()},resetPassword:function(e){return y().auth().sendPasswordResetEmail(e)},updateEmail:function(e){return c.updateEmail(e)},updatePassword:function(e){return c.updatePassword(e)}};return r.a.createElement(O.Provider,{value:g},!s&&t)}function w(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useRef)(),l=Object(n.useContext)(O).signup,c=Object(n.useState)(""),o=Object(m.a)(c,2),h=o[0],E=o[1],v=Object(n.useState)(!1),y=Object(m.a)(v,2),j=y[0],w=y[1],S=Object(p.g)();function x(){return(x=Object(u.a)(i.a.mark((function n(r){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),t.current.value===a.current.value){n.next=3;break}return n.abrupt("return",E("Passwords do not match"));case 3:return n.prev=3,E(""),w(!0),n.next=8,l(e.current.value,t.current.value);case 8:S.push("/"),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),E(n.t0.message);case 14:w(!1);case 15:case"end":return n.stop()}}),n,null,[[3,11]])})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,null,r.a.createElement(s.a.Body,null,r.a.createElement("h2",{className:"text-center mb-4"},"Sign Up"),h&&r.a.createElement(d.a,{variant:"danger"},h),r.a.createElement(g.a,{onSubmit:function(e){return x.apply(this,arguments)}},r.a.createElement(g.a.Group,{id:"email"},r.a.createElement(g.a.Label,null,"Email"),r.a.createElement(g.a.Control,{type:"email",ref:e,required:!0})),r.a.createElement(g.a.Group,{id:"password"},r.a.createElement(g.a.Label,null,"Password"),r.a.createElement(g.a.Control,{type:"password",ref:t,required:!0})),r.a.createElement(g.a.Group,{id:"password-confirm"},r.a.createElement(g.a.Label,null,"Password Confirmation"),r.a.createElement(g.a.Control,{type:"password",ref:a,required:!0})),r.a.createElement(b.a,{disabled:j,className:"m-2 w-100",type:"submit"},"Sign Up")))),r.a.createElement("div",{className:"w-100 text-center mt-2"},"Already have an account? ",r.a.createElement(f.b,{to:"/sign-in"},"Log In")))}a(56);var S=a(29),x={display:"block",marginBottom:4},C={width:"100%",height:"2rem",lineHeight:"2rem",verticalAlign:"middle",fontSize:"1rem",marginBottom:"1.5rem",padding:"0 0.25rem"},k=function(e){var t=e.history,a=Object(n.useState)(""),l=Object(m.a)(a,2),c=l[0],o=l[1],i=Object(n.useState)(""),u=Object(m.a)(i,2),s=u[0],d=u[1],g=Object(n.useState)(""),b=Object(m.a)(g,2),p=b[0],f=b[1],h=Object(n.useState)(""),E=Object(m.a)(h,2),v=E[0],O=E[1],j=Object(n.useState)(""),w=Object(m.a)(j,2),k=w[0],F=w[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Create a new post"),r.a.createElement("section",{style:{margin:"2rem 0"}},r.a.createElement("label",{style:x,htmlFor:"title-field"},"Title"),r.a.createElement("input",{style:C,id:"title-field",type:"text",value:c,onChange:function(e){var t=e.target.value;o(t)}}),r.a.createElement("label",{style:x,htmlFor:"slug-field"},"Slug"),r.a.createElement("input",{style:C,id:"slug-field",type:"text",value:s,onChange:function(e){var t=e.target.value;d(t)}}),r.a.createElement("label",{style:x,htmlFor:"cover-image-field"},"Cover image"),r.a.createElement("input",{style:C,id:"cover-image-field",type:"text",value:p,onChange:function(e){var t=e.target.value;f(t)}}),r.a.createElement("label",{style:x,htmlFor:"cover-image-alt-field"},"Cover image alt"),r.a.createElement("input",{style:C,id:"cover-image-alt-field",type:"text",value:v,onChange:function(e){var t=e.target.value;O(t)}}),r.a.createElement("label",{style:x,htmlFor:"content-field"},"Content"),r.a.createElement("textarea",{style:Object(S.a)(Object(S.a)({},C),{},{height:200,verticalAlign:"top"}),id:"content",type:"text",value:k,onChange:function(e){var t=e.target.value;F(t)}}),r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement("button",{style:{border:"none",color:"#fff",backgroundColor:"#039be5",borderRadius:"4px",padding:"8px 12px",fontSize:"0.9rem"},onClick:function(){var e=function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1;a<10&&(a="0".concat(a));var n=e.getDate();return n<10&&(n="0".concat(n)),{formatted:"".concat(t,"-").concat(a,"-").concat(n),pretty:e.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}}(),a={title:c,dateFormatted:e.formatted,datePretty:e.pretty,slug:s,coverImage:p,coverImageAlt:v,content:k};y().database().ref().child("posts/".concat(s)).set(a).then((function(){return t.push("/")}))}},"Create"))))},F=function(){var e=Object(n.useState)(!0),t=Object(m.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)([]),o=Object(m.a)(c,2),i=o[0],u=o[1];return Object(n.useEffect)((function(){y().database().ref("/posts").orderByChild("dateFormatted").once("value").then((function(e){var t=[],a=e.val();for(var n in a)t.push(a[n]);var r=t.reverse();u(r),l(!1)}))}),[]),a?r.a.createElement("h1",null,"Loading..."):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Blog posts"),r.a.createElement(f.b,{to:"/create",style:{border:"none",color:"#fff",backgroundColor:"#039be5",borderRadius:"4px",padding:"8px 12px",fontSize:"0.9rem"}},"Create Post"),i.map((function(e){return r.a.createElement("section",{key:e.slug,className:"card"},r.a.createElement("img",{src:e.coverImage,alt:e.coverImageAlt}),r.a.createElement("div",{className:"card-content"},r.a.createElement("h2",null,e.title," \u2014"," ",r.a.createElement("span",{style:{color:"#5e5e5e"}},e.datePretty)),r.a.createElement("p",{dangerouslySetInnerHTML:{__html:"".concat(e.content.substring(0,200),"...")}}),r.a.createElement(f.b,{to:"/".concat(e.slug)},"Continue reading...")))})))},I=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Hmmm... can't seem to find that page."),r.a.createElement(f.b,{to:"/"},"Take me home"))},A=function(e){var t=e.match,a=Object(n.useState)(!0),l=Object(m.a)(a,2),c=l[0],o=l[1],i=Object(n.useState)(),u=Object(m.a)(i,2),s=u[0],d=u[1];return Object(n.useEffect)((function(){var e=t.params.slug;y().database().ref().child("/posts/".concat(e)).once("value").then((function(e){e.val()&&d(e.val()),o(!1)}))}),[t]),c?r.a.createElement("h1",null,"Loading..."):!s?r.a.createElement(p.a,{to:"/404"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:s.coverImage,alt:s.coverImageAlt}),r.a.createElement("h1",null,s.title),r.a.createElement("em",null,s.datePretty),r.a.createElement("p",{dangerouslySetInnerHTML:{__html:s.content}}))},P={display:"block",marginBottom:4},B={width:"100%",height:"2rem",lineHeight:"2rem",verticalAlign:"middle",fontSize:"1rem",marginBottom:"1.5rem",padding:"0 0.25rem"},L=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(""),o=Object(m.a)(c,2),i=o[0],u=o[1],s=Object(n.useState)(),d=Object(m.a)(s,2),g=d[0],b=d[1];y().auth().onAuthStateChanged((function(e){e&&b(e)}));return g?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Logged in as: ".concat(g.email)),r.a.createElement("button",{style:{border:"none",color:"#fff",backgroundColor:"#039be5",borderRadius:"4px",padding:"8px 12px",fontSize:"0.9rem"},onClick:function(){y().auth().signOut().then((function(){b()})).catch((function(e){console.error(e),alert(e.message)}))}}," Sign Out")):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Sign in"),r.a.createElement("section",{style:{margin:"2rem 0"}},r.a.createElement("label",{style:P,htmlFor:"email-field"},"Email"),r.a.createElement("input",{id:"email-field",style:B,type:"email",value:a,onChange:function(e){var t=e.target.value;l(t)}}),r.a.createElement("label",{style:P,htmlFor:"password-field"},"Password"),r.a.createElement("input",{id:"password-field",style:B,type:"password",value:i,onChange:function(e){var t=e.target.value;u(t)}}),r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement("button",{style:{border:"none",color:"#fff",backgroundColor:"#039be5",borderRadius:"4px",padding:"8px 12px",fontSize:"0.9rem"},onClick:function(){y().auth().signInWithEmailAndPassword(a,i).catch((function(e){console.error(e),alert(e.message)}))}},"Log In"))))};var z=function(){return r.a.createElement(f.a,null,r.a.createElement("nav",null,r.a.createElement(f.b,{to:"/"},r.a.createElement("h2",null,"Firebase Blog"))),r.a.createElement(j,null,r.a.createElement("main",null,r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/",component:F}),r.a.createElement(p.b,{path:"/create",component:k}),r.a.createElement(p.b,{path:"/sign-up",component:w}),r.a.createElement(p.b,{path:"/sign-in",component:L}),r.a.createElement(p.b,{path:"/404",component:I}),r.a.createElement(p.b,{path:"/:slug",component:A})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(57);c.a.render(r.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[38,1,2]]]);
//# sourceMappingURL=main.36bff1c1.chunk.js.map