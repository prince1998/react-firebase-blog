(window["webpackJsonpreact-firebase-blog-starter"]=window["webpackJsonpreact-firebase-blog-starter"]||[]).push([[0],{39:function(e,t,a){e.exports=a(59)},44:function(e,t,a){},57:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),o=a(18),c=a.n(o),i=(a(44),a(26)),u=a.n(i),s=a(33),m=a(8),d=a(65),g=a(63),b=a(64),p=a(62),f=a(9),h=a(13),E=a(21),v=(a(46),a(50),{apiKey:"AIzaSyC_QXxiHay3ceeSceSEbx0gCpAeKBIzgd4",authDomain:"react-firebase-blog-291d4.firebaseapp.com",databaseURL:"https://react-firebase-blog-291d4-default-rtdb.firebaseio.com",projectId:"react-firebase-blog-291d4",storageBucket:"react-firebase-blog-291d4.appspot.com",messagingSenderId:"56496362352",appId:"1:56496362352:web:9b87c50518de62df9975b5"}),y=function(){return n||(E.a.initializeApp(v),n=E.a,E.a)},O=l.a.createContext();function j(e){var t=e.children,a=Object(r.useState)(),n=Object(m.a)(a,2),o=n[0],c=n[1],i=Object(r.useState)(!0),u=Object(m.a)(i,2),s=u[0],d=u[1];Object(r.useEffect)((function(){return y().auth().onAuthStateChanged((function(e){c(e),d(!1)}))}),[]);var g={currentUser:o,login:function(e,t){return y().auth().signInWithEmailAndPassword(e,t)},signup:function(e,t){return y().auth().createUserWithEmailAndPassword(e,t)},logout:function(){return y().auth().signOut()},resetPassword:function(e){return y().auth().sendPasswordResetEmail(e)},updateEmail:function(e){return o.updateEmail(e)},updatePassword:function(e){return o.updatePassword(e)}};return l.a.createElement(O.Provider,{value:g},!s&&t)}function S(){var e=Object(r.useRef)(),t=Object(r.useRef)(),a=Object(r.useRef)(),n=Object(r.useContext)(O).signup,o=Object(r.useState)(""),c=Object(m.a)(o,2),i=c[0],E=c[1],v=Object(r.useState)(!1),y=Object(m.a)(v,2),j=y[0],S=y[1],w=Object(f.g)();function x(){return(x=Object(s.a)(u.a.mark((function r(l){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(l.preventDefault(),t.current.value===a.current.value){r.next=3;break}return r.abrupt("return",E("Passwords do not match"));case 3:return r.prev=3,E(""),S(!0),r.next=8,n(e.current.value,t.current.value);case 8:w.push("/"),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(3),E(r.t0.message);case 14:S(!1);case 15:case"end":return r.stop()}}),r,null,[[3,11]])})))).apply(this,arguments)}return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,null,l.a.createElement(d.a.Body,null,l.a.createElement("h2",{className:"text-center mb-4"},"Sign Up"),i&&l.a.createElement(g.a,{variant:"danger"},i),l.a.createElement(b.a,{onSubmit:function(e){return x.apply(this,arguments)}},l.a.createElement(b.a.Group,{id:"email"},l.a.createElement(b.a.Label,null,"Email"),l.a.createElement(b.a.Control,{type:"email",ref:e,required:!0})),l.a.createElement(b.a.Group,{id:"password"},l.a.createElement(b.a.Label,null,"Password"),l.a.createElement(b.a.Control,{type:"password",ref:t,required:!0})),l.a.createElement(b.a.Group,{id:"password-confirm"},l.a.createElement(b.a.Label,null,"Password Confirmation"),l.a.createElement(b.a.Control,{type:"password",ref:a,required:!0})),l.a.createElement(p.a,{disabled:j,className:"m-2 w-100",type:"submit"},"Sign Up")))),l.a.createElement("div",{className:"w-100 text-center mt-2"},"Already have an account? ",l.a.createElement(h.b,{to:"/sign-in"},"Log In")))}a(57);var w=a(29),x={display:"block",marginBottom:4},C={width:"100%",height:"2rem",lineHeight:"2rem",verticalAlign:"middle",fontSize:"1rem",marginBottom:"1.5rem",padding:"0 0.25rem"},k=function(e){var t=e.history,a=Object(r.useState)(""),n=Object(m.a)(a,2),o=n[0],c=n[1],i=Object(r.useState)(""),u=Object(m.a)(i,2),s=u[0],d=u[1],g=Object(r.useState)(""),b=Object(m.a)(g,2),p=b[0],f=b[1],h=Object(r.useState)(""),E=Object(m.a)(h,2),v=E[0],O=E[1],j=Object(r.useState)(""),S=Object(m.a)(j,2),k=S[0],F=S[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Create a new post"),l.a.createElement("section",{style:{margin:"2rem 0"}},l.a.createElement("label",{style:x,htmlFor:"title-field"},"Title"),l.a.createElement("input",{style:C,id:"title-field",type:"text",value:o,onChange:function(e){var t=e.target.value;c(t)}}),l.a.createElement("label",{style:x,htmlFor:"slug-field"},"Slug"),l.a.createElement("input",{style:C,id:"slug-field",type:"text",value:s,onChange:function(e){var t=e.target.value;d(t)}}),l.a.createElement("label",{style:x,htmlFor:"cover-image-field"},"Cover image"),l.a.createElement("input",{style:C,id:"cover-image-field",type:"text",value:p,onChange:function(e){var t=e.target.value;f(t)}}),l.a.createElement("label",{style:x,htmlFor:"cover-image-alt-field"},"Cover image alt"),l.a.createElement("input",{style:C,id:"cover-image-alt-field",type:"text",value:v,onChange:function(e){var t=e.target.value;O(t)}}),l.a.createElement("label",{style:x,htmlFor:"content-field"},"Content"),l.a.createElement("textarea",{style:Object(w.a)(Object(w.a)({},C),{},{height:200,verticalAlign:"top"}),id:"content",type:"text",value:k,onChange:function(e){var t=e.target.value;F(t)}}),l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement("button",{style:{border:"none",color:"#fff",backgroundColor:"#039be5",borderRadius:"4px",padding:"8px 12px",fontSize:"0.9rem"},onClick:function(){var e=function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1;a<10&&(a="0".concat(a));var n=e.getDate();return n<10&&(n="0".concat(n)),{formatted:"".concat(t,"-").concat(a,"-").concat(n),pretty:e.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}}(),a={title:o,dateFormatted:e.formatted,datePretty:e.pretty,slug:s,coverImage:p,coverImageAlt:v,content:k};y().database().ref().child("posts/".concat(s)).set(a).then((function(){return t.push("/")}))}},"Create"))))},F=function(){var e=Object(r.useState)(!0),t=Object(m.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)([]),c=Object(m.a)(o,2),i=c[0],u=c[1];return Object(r.useEffect)((function(){y().database().ref("/posts").orderByChild("dateFormatted").once("value").then((function(e){var t=[],a=e.val();for(var r in a)t.push(a[r]);var l=t.reverse();u(l),n(!1)}))}),[]),a?l.a.createElement("h1",null,"Loading..."):l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Blog posts"),l.a.createElement(h.b,{to:"/create",style:{border:"none",color:"#fff",backgroundColor:"#039be5",borderRadius:"4px",padding:"8px 12px",fontSize:"0.9rem"}},"Create Post"),i.map((function(e){return l.a.createElement("section",{key:e.slug,className:"card"},l.a.createElement("img",{src:e.coverImage,alt:e.coverImageAlt}),l.a.createElement("div",{className:"card-content"},l.a.createElement("h2",null,e.title," \u2014"," ",l.a.createElement("span",{style:{color:"#5e5e5e"}},e.datePretty)),l.a.createElement("p",{dangerouslySetInnerHTML:{__html:"".concat(e.content.substring(0,200),"...")}}),l.a.createElement(h.b,{to:"/".concat(e.slug)},"Continue reading...")))})))},I=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Hmmm... can't seem to find that page."),l.a.createElement(h.b,{to:"/"},"Take me home"))},A=function(e){var t=e.match,a=Object(r.useState)(!0),n=Object(m.a)(a,2),o=n[0],c=n[1],i=Object(r.useState)(),u=Object(m.a)(i,2),s=u[0],d=u[1];return Object(r.useEffect)((function(){var e=t.params.slug;y().database().ref().child("/posts/".concat(e)).once("value").then((function(e){e.val()&&d(e.val()),c(!1)}))}),[t]),o?l.a.createElement("h1",null,"Loading..."):!s?l.a.createElement(f.a,{to:"/404"}):l.a.createElement(l.a.Fragment,null,l.a.createElement("img",{src:s.coverImage,alt:s.coverImageAlt}),l.a.createElement("h1",null,s.title),l.a.createElement("em",null,s.datePretty),l.a.createElement("p",{dangerouslySetInnerHTML:{__html:s.content}}))},P=a(37),L=a.n(P),B={display:"block",marginBottom:4},z={width:"100%",height:"2rem",lineHeight:"2rem",verticalAlign:"middle",fontSize:"1rem",marginBottom:"1.5rem",padding:"0 0.25rem"},R=function(){var e=Object(r.useState)(""),t=Object(m.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)(""),c=Object(m.a)(o,2),i=c[0],u=c[1],s=Object(r.useState)(),d=Object(m.a)(s,2),g=d[0],b=d[1],p=Object(r.useState)(),f=Object(m.a)(p,2),E=f[0],v=f[1];y().auth().onAuthStateChanged((function(e){e&&(console.log(e),b(e))}));var O=function(e){v(e),n(e.profileObj.email)};return(null!==g&&void 0!==g?g:E)?l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Logged in as: ".concat(a)),l.a.createElement("button",{style:{border:"none",color:"#fff",backgroundColor:"#039be5",borderRadius:"4px",padding:"8px 12px",fontSize:"0.9rem"},onClick:function(){y().auth().signOut().then((function(){b(),v()})).catch((function(e){console.error(e),alert(e.message)}))}}," Sign Out"),l.a.createElement(h.b,{to:"/",style:{border:"none",color:"#fff",backgroundColor:"#039be5",borderRadius:"4px",padding:"8px 12px",fontSize:"0.9rem"}}," View your profile")):l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Sign in"),l.a.createElement("section",{style:{margin:"2rem 0"}},l.a.createElement("label",{style:B,htmlFor:"email-field"},"Email"),l.a.createElement("input",{id:"email-field",style:z,type:"email",value:a,onChange:function(e){var t=e.target.value;n(t)}}),l.a.createElement("label",{style:B,htmlFor:"password-field"},"Password"),l.a.createElement("input",{id:"password-field",style:z,type:"password",value:i,onChange:function(e){var t=e.target.value;u(t)}}),l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement("button",{style:{border:"none",color:"#fff",backgroundColor:"#039be5",borderRadius:"4px",padding:"8px 12px",fontSize:"0.9rem"},onClick:function(){y().auth().signInWithEmailAndPassword(a,i).catch((function(e){console.error(e),alert(e.message)}))}},"Log In"),l.a.createElement(L.a,{clientId:"299062469029-b04om2tb8n8hnk2e9ed2i7o718tidook.apps.googleusercontent.com",buttonText:"Login",onSuccess:O,onFailure:O,cookiePolicy:"single_host_origin"}))))};var _=function(){return l.a.createElement(h.a,null,l.a.createElement("nav",null,l.a.createElement(h.b,{to:"/"},l.a.createElement("h2",null,"Firebase Blog"))),l.a.createElement(j,null,l.a.createElement("main",null,l.a.createElement(f.d,null,l.a.createElement(f.b,{exact:!0,path:"/",component:F}),l.a.createElement(f.b,{path:"/create",component:k}),l.a.createElement(f.b,{path:"/sign-up",component:S}),l.a.createElement(f.b,{path:"/sign-in",component:R}),l.a.createElement(f.b,{path:"/404",component:I}),l.a.createElement(f.b,{path:"/:slug",component:A})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(58);c.a.render(l.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[39,1,2]]]);
//# sourceMappingURL=main.0ba64ec6.chunk.js.map